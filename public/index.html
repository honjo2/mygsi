<!DOCTYPE html>
<html>
<head>
    <title>国土交通省の国土数値情報をベクタータイル（Protocol Buffers）化</title>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.20.1/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin: 0; padding: 0; }
        html, body, #map { height: 90%; }
    </style>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.20.1/mapbox-gl.js'></script> <!-- heroku用 -->
    <!--<script src='js/mapbox-gl-dev-nocache.js'></script>--> <!-- ローカル用 -->
</head>

<body>
<div id='map'></div>
国土交通省「国土数値情報（<a href="http://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N03.html">行政区域データ</a>、<a href="http://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N02-v2_2.html">鉄道データ</a>）」をもとに<a href="https://twitter.com/honjo2">honjo2</a>が加工
<br />
Since May 11, 2015
<script>
var map = new mapboxgl.Map({
    container: 'map',
    center: [139.7, 35.7],
    zoom: 11,
    minZoom: 7,
    maxZoom: 12.8,
    style: {
  "version": 8,
  "name": "Bright",
  "sources": {
    "gsi": {
      "type": "vector",
      {
    "attribution":"<a href=\"https://twitter.com/honjo2\">honjo2</a>",
    "bounds":[
        -180,
        -85.0511,
        180,
        85.0511
    ],
    "center":[
        0,
        0,
        0
    ],
    "description":"",
    "filesize":0,
    "format":"pbf",
    "id":"GSI",
    "maskLevel":8,
    "maxzoom":17,
    "minzoom":0,
    "name":"GSI",
    "private":true,
    "scheme":"xyz",
    "tilejson":"2.0.0",
    "tiles":[
        "https://mygsi.herokuapp.com/pbf/{z}/{x}/{y}.pbf"
    ],
    "vector_layers":[
        {
            "description":"",
            "fields":{
                "class":"One of: cemetery, hospital, industrial, park, parking, pitch, sand, school, wood",
                "osm_id":"Unique OSM ID number"
            },
            "id":"landuse"
        },
        {
            "description":"",
            "fields":{
                "class":"One of: river, canal, stream, stream_intermittent, ditch, drain",
                "osm_id":"Unique OSM ID number",
                "type":"One of: river, canal, stream, ditch, drain"
            },
            "id":"waterway"
        },
        {
            "description":"",
            "fields":{
                "osm_id":"Unique OSM ID number"
            },
            "id":"water"
        },
        {
            "description":"",
            "fields":{
                "osm_id":"Unique OSM ID number",
                "type":"One of: runway, taxiway, apron"
            },
            "id":"aeroway"
        },
        {
            "description":"",
            "fields":{
                "class":"One of: fence, hedge, cliff, gate",
                "osm_id":"Unique OSM ID number"
            },
            "id":"barrier_line"
        },
        {
            "description":"",
            "fields":{
                "osm_id":"Unique OSM ID number"
            },
            "id":"building"
        },
        {
            "description":"",
            "fields":{
                "class":"One of: wetland, wetland_noveg",
                "osm_id":"Unique OSM ID number"
            },
            "id":"landuse_overlay"
        },
        {
            "description":"",
            "fields":{
                "class":"One of: motorway, motorway_link, main, street, street_limited, service, driveway, path, major_rail, minor_rail, aerialway",
                "layer":"Number used for ordering overlapping tunnels",
                "oneway":"Number. Oneway roads are 1, all others are 0.",
                "osm_id":"Unique OSM ID number",
                "type":"The value of the tunnel's highway tag"
            },
            "id":"tunnel"
        },
        {
            "description":"",
            "fields":{
                "class":"One of: motorway, motorway_link, main, street, street_limited, service, driveway, path, major_rail, minor_rail, aerialway",
                "oneway":"Number. Oneway roads are 1, all others are 0.",
                "osm_id":"Unique OSM ID number",
                "type":"The value of the road's highway tag"
            },
            "id":"road"
        },
        {
            "description":"",
            "fields":{
                "class":"One of: motorway, motorway_link, main, street, street_limited, service, driveway, path, major_rail, minor_rail, aerialway",
                "layer":"Number used for ordering overlapping bridges",
                "oneway":"Number. Oneway bridges are 1, all others are 0.",
                "osm_id":"Unique OSM ID number",
                "type":"The value of the bridge's highway tag"
            },
            "id":"bridge"
        },
        {
            "description":"",
            "fields":{
                "admin_level":"The OSM administrative level of the boundary",
                "disputed":"Number. Disputed boundaries are 1, all others are 0.",
                "maritime":"Number. Maritime boundaries are 1, all others are 0.",
                "osm_id":"Unique OSM ID number"
            },
            "id":"admin"
        },
        {
            "description":"",
            "fields":{
                "osm_id":"Unused"
            },
            "id":"country_label_line"
        },
        {
            "description":"",
            "fields":{
                "name":"Local name of the country",
                "name_de":"German name of the country",
                "name_en":"English name of the country",
                "name_es":"Spanish name of the country",
                "name_fr":"French name of the country",
                "osm_id":"Unique OSM ID number",
                "scalerank":"Number, 1-8. Useful for styling text sizes."
            },
            "id":"country_label"
        },
        {
            "description":"",
            "fields":{
                "labelrank":"Number, 1-6. Useful for styling text sizes.",
                "name":"Local or international name of the water body",
                "name_de":"German name of the water body",
                "name_en":"English name of the water body",
                "name_es":"Spanish name of the water body",
                "name_fr":"French name of the water body",
                "placement":"One of: point, line"
            },
            "id":"marine_label"
        },
        {
            "description":"",
            "fields":{
                "area":"The area of the state in kilometers²",
                "name":"Local name of the state",
                "name_de":"German name of the state",
                "name_en":"English name of the state",
                "name_es":"Spanish name of the state",
                "name_fr":"French name of the state",
                "osm_id":"Unique OSM ID number"
            },
            "id":"state_label"
        },
        {
            "description":"",
            "fields":{
                "capital":"Admin level the city is a capital of, if any. One of: 2, 3, 4, null",
                "ldir":"A hint for label placement at low zoom levels. One of: N, E, S, W, NE, SE, SW, NW, null",
                "localrank":"Number. Priority relative to nearby places. Useful for limiting label density.",
                "name":"Local name of the place",
                "name_de":"German name of the place",
                "name_en":"English name of the place",
                "name_es":"Spanish name of the place",
                "name_fr":"French name of the place",
                "osm_id":"Unique OSM ID number",
                "scalerank":"Number, 0-9 or null. Useful for styling text & marker sizes.",
                "type":"One of: city, town, village, hamlet, suburb, neighbourhood"
            },
            "id":"place_label"
        },
        {
            "description":"",
            "fields":{
                "area":"The area of the water body in Mercator meters²",
                "name":"Local name of the water body",
                "name_de":"German name of the water body",
                "name_en":"English name of the water body",
                "name_es":"Spanish name of the water body",
                "name_fr":"French name of the water body",
                "osm_id":"Unique OSM ID number"
            },
            "id":"water_label"
        },
        {
            "description":"",
            "fields":{
                "address":"Street address of the POI",
                "localrank":"Number. Priority relative to nearby POIs. Useful for limiting label density.",
                "maki":"The name of the Maki icon that should be used for the POI",
                "name":"Local name of the POI",
                "name_de":"German name of the POI",
                "name_en":"English name of the POI",
                "name_es":"Spanish name of the POI",
                "name_fr":"French name of the POI",
                "network":"String",
                "osm_id":"Unique OSM ID number",
                "ref":"Short reference code, if any",
                "scalerank":"Number. 1-4. Useful for styling icon sizes and minimum zoom levels.",
                "type":"The original OSM tag value",
                "website":"URL of the POI"
            },
            "id":"poi_label"
        },
        {
            "description":"",
            "fields":{
                "class":"One of: motorway, motorway_link, main, street, street_limited, service, driveway, path",
                "len":"Number. Length of the road segment in Mercator meters.",
                "name":"Local name of the road",
                "name_de":"German name of the road",
                "name_en":"English name of the road",
                "name_es":"Spanish name of the road",
                "name_fr":"French name of the road",
                "osm_id":"Unique OSM ID number",
                "ref":"Route number of the road",
                "reflen":"Number. How many characters long the ref tag is. Useful for shield styling."
            },
            "id":"road_label"
        },
        {
            "description":"",
            "fields":{
                "class":"One of: river, canal, stream, stream_intermittent",
                "name":"Local name of the waterway",
                "name_de":"German name of the waterway",
                "name_en":"English name of the waterway",
                "name_es":"Spanish name of the waterway",
                "name_fr":"French name of the waterway",
                "osm_id":"Unique OSM ID number",
                "type":"One of: river, canal, stream"
            },
            "id":"waterway_label"
        },
        {
            "description":"",
            "fields":{
                "house_num":"House number",
                "osm_id":"Unique OSM ID number"
            },
            "id":"housenum_label"
        }
    ]
}


    }
  },
  "sprite": "https://mygsi.herokuapp.com/styles/bright",
  "glyphs": "https://mygsi.herokuapp.com/pbf/glyphs/{fontstack}/{range}.pbf",
  "layers": [{
    "id": "background",
    "type": "background",
    "paint": {
      "background-color": "#f8f4f0"
    }



  }, {
  "id": "gyouseikai-fill",
  "type": "fill",
  "source": "gsi",
  "source-layer": "polygon",
  "filter": ["==", "$type", "Polygon"],
  "paint": {
    "fill-color": "#a0c8f0",
    "fill-outline-color": "#66601a"
  }





  }, {
    "id": "station",
    "type": "line",
    "source": "gsi",
    "source-layer": "line",
    "minzoom": 8,
    "maxzoom": 22,
    "interactive": true,
    "filter": ["==", "type", "station"],
    "layout": {
      "visibility": "visible",
      "line-cap": "butt"
    },
    "paint": {
      "line-color": "#dc143c",
      "line-width": {
        "base": 3.5,
        "stops": [[14, 3.0], [20, 3]]
      }
    }


  }, {
    "id": "road-rail",
    "type": "line",
    "source": "gsi",
    "source-layer": "line",
    "minzoom": 7,
    "maxzoom": 22,
    "interactive": true,
    "filter": ["==", "type", "railroadsection"],
    "layout": {
      "visibility": "visible",
      "line-cap": "butt"
    },
    "paint": {
      "line-color": {
        "stops": [[13, "#d8d5c8"], [16, "#b3b1a6"]]
      },
      "line-width": {
        "base": 1.5,
        "stops": [[14, 1.0], [20, 1]]
      }
    }
  }, {
    "id": "road-rail-tracks",
    "ref": "road-rail",
    "interactive": true,
    "paint": {
      "line-color": {
        "stops": [[13, "#d8d5c8"], [16, "#b3b1a6"]]
      },
      "line-width": {
        "base": 1.5,
        "stops": [[14, 4], [20, 8]]
      },
      "line-dasharray": [0.1, 15],
      "line-opacity": {
        "base": 1,
        "stops": [[13.75, 0], [14, 1]]
      }
    }





  }, {
    "id": "station-label",
    "type": "symbol",
    "source": "gsi",
    "minzoom": 9,
    "source-layer": "line",
    "filter": ["==", "type", "station"],
    "layout": {
      "text-font": ["semibold"],
      "text-letter-spacing": 0.1,
      "text-field": "{name}",
      "text-size": 10,
      "text-max-width": 9
    },
    "paint": {
      "text-color": "#a9a9a9",
      "text-halo-color": "rgba(255,255,255,0.8)",
      "text-halo-width": 1.2
    }


  }, {
    "id": "label",
    "type": "symbol",
    "source": "gsi",
    "source-layer": "point",
    "filter": ["==", "$type", "Point"],
    "layout": {
      "text-font": ["semibold"],
      "text-transform": "uppercase",
      "text-letter-spacing": 0.1,
      "text-field": "{name}",
      "text-size": 11,
      "text-max-width": 9
    },
    "paint": {
      "text-color": "#633",
      "text-halo-color": "rgba(255,255,255,0.8)",
      "text-halo-width": 1.2
    }




  }]
}
, // heroku用
    // style: '/styles/style-local.json', // ローカル用
    hash: true
});
// console.log(map);

map.addControl(new mapboxgl.Navigation());
</script>
</body>
</html>
